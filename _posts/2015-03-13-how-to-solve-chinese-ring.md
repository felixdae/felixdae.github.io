---

title: 如何解九连环
---

{{ page.title }}
===============

前几天发现京东收藏夹里有个九连环，于是就买了下来。作为一个普通青年，没做任何参考，花了两个晚上，合计5、6个小时才最终解出来。这里把解的思路记录下来。

当右手提着环柄时，把环挂在杠上记为1，环脱离了杠记为0。最初的局面则为111111111，所有环都取下来的局面为000000000。

从左往右数，应该依次拆下第9环，第8环，第7环。。。这样的顺序可以保证先拆下的环就真正拆下来了，无需再动了。

可以发现00..011XX这种局面下可以自由拆下挂上第2个1，X表示一个环的任意状态。

要拆下第9环，可以先达到000000011，即取下前7环。然后取下第9环，此时局面为000000010。

要拆下第8环，可以先达到000000110。直接挂上第7环貌似不好搞，但是可以迂回，先执行上面的第一个操作的逆操作，挂上前面前7环，再取下前6环。此时即可自由取下第8环。

按照此方面可以依次取下各环。下面算一下操作的总步骤数。

拆下前n环的操作数记为f(n)，显然要把前n环再挂回去也需要f(n)。

那么步骤总数为：

f(9) = f(7) + 1

 \+ f(7) + f(6) + 1

 \+ f(6) + f(5) + 1

 \+ f(5) + f(4) + 1

 \+ f(4) + f(3) + 1

 \+ f(3) + f(2) + 1

 \+ f(2) + f(1) + 1

 \+ f(1) + f(2)

f(0) = 0，f(1) = 1，f(2) = 2。可以得到：f(9) = 341
